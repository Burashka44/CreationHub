# üîß HOTFIX: Services Status Issue Resolution

**–î–∞—Ç–∞:** 2026-01-11 12:25  
**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å –∫–∞–∫ "–Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ" –≤ –¥–∞—à–±–æ—Ä–¥–µ  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

---

## üö® **–ü–†–ò–ß–ò–ù–ê –ü–†–û–ë–õ–ï–ú–´**

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ `system-api` (–≤–æ –≤—Ä–µ–º—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è Phase 3 fixes), Docker –ø—Ä–∏—Å–≤–æ–∏–ª –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –Ω–æ–≤—ã–π IP-–∞–¥—Ä–µ—Å:
- **–°—Ç–∞—Ä—ã–π IP:** `172.18.0.11`
- **–ù–æ–≤—ã–π IP:** (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω Docker)

**Nginx** –∫—ç—à–∏—Ä–æ–≤–∞–ª —Å—Ç–∞—Ä—ã–π IP-–∞–¥—Ä–µ—Å –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–ª –ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –Ω–µ–º—É, –ø–æ–ª—É—á–∞—è "Connection refused".

---

## ‚úÖ **–†–ï–®–ï–ù–ò–ï**

–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è —Å–±—Ä–æ—Å–∞ DNS-–∫—ç—à–∞:

```bash
docker compose restart creationhub
```

–≠—Ç–æ –∑–∞—Å—Ç–∞–≤–∏–ª–æ Nginx –∑–∞–Ω–æ–≤–æ —Ä–µ–∑–æ–ª–≤–∏—Ç—å –∏–º—è `system-api` –∏ –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π IP.

---

## üîç **–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Nginx –ø–æ–∫–∞–∑–∞–ª–∞:
[error] connect() failed (111: Connection refused) 
upstream: "http://172.18.0.11:9191/api/services/status-by-port"
                    ^^^^^^^^^ —Å—Ç–∞—Ä—ã–π IP

# –ü—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ System API —Ä–∞–±–æ—Ç–∞–ª–æ:
curl http://localhost:9191/api/services/status-by-port  # ‚úÖ OK

# –ß–µ—Ä–µ–∑ Nginx –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ:
curl http://localhost:7777/api/services/status-by-port  # ‚ùå Error
```

---

## üìä **–¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°**

```json
{
  "postgres": "online",
  "redis": "online",
  "api": "online",
  "dashboard": "online",
  "ollama": "online",
  "grafana": "online",
  "prometheus": "online"
}
```

‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ –¥–∞—à–±–æ—Ä–¥–µ.

---

## üõ°Ô∏è **–ü–†–û–§–ò–õ–ê–ö–¢–ò–ö–ê –í –ë–£–î–£–©–ï–ú**

### **–û–ø—Ü–∏—è 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ IP (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```yaml
# docker-compose.yml
services:
  system-api:
    networks:
      creationhub-backend:
        ipv4_address: 172.18.0.11
```

### **–û–ø—Ü–∏—è 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx resolver —Å –∫–æ—Ä–æ—Ç–∫–∏–º TTL**
```nginx
resolver 127.0.0.11 valid=10s;  # Docker –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π DNS
set $upstream system-api:9191;
proxy_pass http://$upstream;
```

### **–û–ø—Ü–∏—è 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å docker-compose down/up –≤–º–µ—Å—Ç–æ restart**
–ü—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö System API –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
```bash
docker compose down system-api
docker compose up -d system-api
docker compose restart creationhub  # –í—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å Nginx –ø–æ—Å–ª–µ
```

---

## ‚úÖ **–í–ï–†–î–ò–ö–¢**

–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞. –≠—Ç–æ –±—ã–ª–∞ –≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ DNS-–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.  
**–î–µ–π—Å—Ç–≤–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è** - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–∏ –±—É–¥—É—â–∏—Ö –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ö System API –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å Nginx.

---

**–í—Ä–µ–º—è —Ä–µ—à–µ–Ω–∏—è:** < 5 –º–∏–Ω—É—Ç  
**Downtime:** ~10 —Å–µ–∫—É–Ω–¥ (–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx)

# üîç COMPREHENSIVE BUG SCAN REPORT

**–î–∞—Ç–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:** 2026-01-11 12:27  
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **4 –ü–†–û–ë–õ–ï–ú–´ –û–ë–ù–ê–†–£–ñ–ï–ù–´**

---

## üö® **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´**

### **1. ‚ùå Hardcoded IP –≤ nginx.conf**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** üî¥ **HIGH (7/10)**

**–ù–∞–π–¥–µ–Ω–æ:**
```nginx
proxy_pass http://192.168.1.220:61208/api/4/;  # Glances
proxy_pass http://192.168.1.220:8686/;         # ???
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ï—Å–ª–∏ IP —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑–º–µ–Ω–∏—Ç—Å—è ‚Üí routes —Å–ª–æ–º–∞—é—Ç—Å—è
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞ –¥—Ä—É–≥—É—é –º–∞—à–∏–Ω—É –±–µ–∑ –ø—Ä–∞–≤–∫–∏ –∫–æ–Ω—Ñ–∏–≥–∞

**–†–µ—à–µ–Ω–∏–µ:**
```nginx
# –ë–´–õ–û:
proxy_pass http://192.168.1.220:61208/api/4/;

# –î–û–õ–ñ–ù–û –ë–´–¢–¨ (–µ—Å–ª–∏ Glances –≤ Docker):
proxy_pass http://host.docker.internal:61208/api/4/;

# –ò–õ–ò –¥–æ–±–∞–≤–∏—Ç—å –≤ docker-compose.yml:
extra_hosts:
  - "glances:192.168.1.220"
```

---

### **2. ‚ùå Hardcoded IPs –≤ System API**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** üü° **MEDIUM (5/10)**

**–ù–∞–π–¥–µ–Ω–æ:**
- `system-api/routes/services.js`: `host = '192.168.1.220'`
- `system-api/index.js`: CORS origins —Å–æ–¥–µ—Ä–∂–∏—Ç `http://192.168.1.220:7777`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ñ–µ—Å—Ç–∫–æ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ —Ç–µ–∫—É—â–µ–º—É IP
- –ü—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –Ω–∞ –¥—Ä—É–≥–æ–π —Ö–æ—Å—Ç —Å–ª–æ–º–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```javascript
// system-api/routes/services.js
const HOST_IP = process.env.HOST_IP || '192.168.1.220';
const checkPort = (port, host = HOST_IP) => ...

// system-api/index.js
const CORS_ORIGINS = process.env.CORS_ORIGINS
    ? process.env.CORS_ORIGINS.split(',')
    : ['http://localhost:5173', ...];
```

---

## ‚ö†Ô∏è **–í–ê–ñ–ù–´–ï –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–Ø**

### **3. ‚ö†Ô∏è Missing Dependencies –≤ docker-compose.yml**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** üü° **MEDIUM (4/10)**

**–ù–∞–π–¥–µ–Ω–æ:**
- `grafana` –Ω–µ –∏–º–µ–µ—Ç `depends_on: [prometheus]`
- `system-api` –Ω–µ –∏–º–µ–µ—Ç `depends_on: [postgres, redis]`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–≥—É—Ç —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- System API –º–æ–∂–µ—Ç –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Redis/Postgres –¥–æ –∏—Ö –∑–∞–ø—É—Å–∫–∞

**–†–µ—à–µ–Ω–∏–µ:**
```yaml
grafana:
  depends_on:
    prometheus:
      condition: service_started

system-api:
  depends_on:
    creationhub-postgres:
      condition: service_healthy
    redis:
      condition: service_healthy
```

---

### **4. ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**

**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** üü¢ **LOW (2/10)**

**–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ `.env`:**
- `AI_DATA_PATH`
- `CORS_ORIGINS`
- `GLANCES_URL`
- `PORT`
- `RATE_LIMIT_RPM`
- `WG_CONFIG_DIR`

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.

**–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–∏—Ç—å –≤ `.env`:
```bash
# System
PORT=9191
WG_CONFIG_DIR=/etc/wireguard

# Paths
AI_DATA_PATH=./ai_data
GLANCES_URL=http://192.168.1.220:61208

# Security
CORS_ORIGINS=http://localhost:7777,http://192.168.1.220:7777
RATE_LIMIT_RPM=500
```

---

## üìä **–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ù–ê–ë–õ–Æ–î–ï–ù–ò–Ø**

### **‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ:**
- –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã
- –ù–µ—Ç –ø—É–±–ª–∏—á–Ω–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤ (–∫—Ä–æ–º–µ dashboard)
- `.env` –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ permissions (600)
- –í—Å–µ healthcheck'–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
- –ù–µ—Ç CHANGEME –∑–Ω–∞—á–µ–Ω–∏–π –≤ production

### **‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:**
- **–î–∏—Å–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω –Ω–∞ 74%** - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏/–±—ç–∫–∞–ø—ã
- **PostgreSQL errors –≤ –ª–æ–≥–∞—Ö** - –∑–∞–ø—Ä–æ—Å—ã –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–ª–æ–Ω–∫–∞–º
- **404 –Ω–∞ `/api/services/health`** - endpoint –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –º–æ–∂–µ—Ç –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å)

---

## üîß **–ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô**

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (–≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–µ–π—á–∞—Å)**
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å hardcoded IPs –≤ nginx.conf
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ docker-compose.yml

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –í–∞–∂–Ω—ã–µ (–≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–µ–≥–æ–¥–Ω—è)**
3. ‚úÖ –£–±—Ä–∞—Ç—å hardcoded IPs –∏–∑ System API
4. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞ (–Ω–∞ –Ω–µ–¥–µ–ª–µ)**
5. –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ Docker volumes (–¥–∏—Å–∫ 74%)
6. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ PostgreSQL (–Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏)
7. –î–æ–±–∞–≤–∏—Ç—å `/api/services/health` endpoint –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

---

## üìã **–ß–ï–ö–õ–ò–°–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô**

```bash
- [ ] 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å nginx.conf (hardcoded IPs)
- [ ] 2. –î–æ–±–∞–≤–∏—Ç—å depends_on –≤ docker-compose.yml
- [ ] 3. –í—ã–Ω–µ—Å—Ç–∏ IPs –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (System API)
- [ ] 4. –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ .env
- [ ] 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- [ ] 6. –ó–∞–ø—É—Å—Ç–∏—Ç—å bug_scanner.sh —Å–Ω–æ–≤–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
```

---

## üéØ **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò**

**–•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è:**
1. **–ò—Å–ø—Ä–∞–≤–∏–ª –≤—Å–µ 4 –ø—Ä–æ–±–ª–µ–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
2. **–ò—Å–ø—Ä–∞–≤–∏–ª —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ** (1-2)
3. **–î–∞–ª –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

**–í–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ?**

---

**Scan Complete**  
**Total Issues:** 4  
**Critical:** 1  
**Medium:** 2  
**Low:** 1

# ‚ö†Ô∏è PHASE 3 MONITORING: POST-IMPLEMENTATION RISK ANALYSIS

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2026-01-11 12:15  
**–ê–Ω–∞–ª–∏—Ç–∏–∫:** Antigravity AI  
**–°—Ç–∞—Ç—É—Å:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ê–£–î–ò–¢

---

## üö® **–û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´**

### **–ö–†–ò–¢–ò–ß–ù–û: –ü–æ—Ä—Ç 3001 (Grafana) –æ—Ç–∫—Ä—ã—Ç –ø—É–±–ª–∏—á–Ω–æ**

**–†–∏—Å–∫:** ‚ö†Ô∏è **HIGH (8/10)**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
tcp LISTEN 0.0.0.0:3001  # –î–æ—Å—Ç—É–ø–Ω–æ –∏–∑ –ª—é–±–æ–π —Å–µ—Ç–∏!
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- Grafana –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–∑ LAN –±–µ–∑ VPN
- –ï—Å–ª–∏ –ø–æ—Ä—Ç —Ñ–æ—Ä–≤–∞—Ä–¥–Ω—É—Ç –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ ‚Üí –¥–æ—Å—Ç—É–ø–Ω–æ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –ë—Ä—É—Ç—Ñ–æ—Ä—Å –ø–∞—Ä–æ–ª—è –∞–¥–º–∏–Ω–∞
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å DoS-–∞—Ç–∞–∫–∏ –Ω–∞ Grafana

**–†–µ—à–µ–Ω–∏–µ:**
```yaml
# docker-compose.yml - –∏–∑–º–µ–Ω–∏—Ç—å:
ports:
  - "0.0.0.0:3001:3000"  # –ë–´–õ–û (–ø–ª–æ—Ö–æ)
–Ω–∞:
  - "127.0.0.1:3001:3000"  # –î–û–õ–ñ–ù–û –ë–´–¢–¨ (—Ö–æ—Ä–æ—à–æ)
```

---

### **–°–†–ï–î–ù–ò–ô –†–ò–°–ö: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤**

**–†–∏—Å–∫:** ‚ö†Ô∏è **MEDIUM (5/10)**

**–î–æ–±–∞–≤–ª–µ–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞:**

| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä | CPU | RAM | –î–∏—Å–∫ |
|-----------|-----|-----|------|
| **Prometheus** | 0.20% | 177 MB | 2.5 MB |
| **Grafana** | 0.39% | 74 MB | 42 MB |
| **cAdvisor** | 10.15% | 1.3 GB | - |
| **Node Exporter** | 0.00% | 8 MB | - |
| **Redis Exporter** | 1.97% | 8 MB | - |
| **Postgres Exporter** | 0.00% | 8 MB | - |
| **–ò–¢–û–ì–û** | ~13% | ~1.6 GB | 45 MB |

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- **cAdvisor –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç 1.3 GB RAM** (—ç—Ç–æ –º–Ω–æ–≥–æ!)
- CPU –Ω–∞–≥—Ä—É–∑–∫–∞ —É–≤–µ–ª–∏—á–∏–ª–∞—Å—å –Ω–∞ 13%
- –î–æ–±–∞–≤–ª–µ–Ω–æ 6 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–±—ã–ª–æ 24, —Å—Ç–∞–ª–æ 30)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ `cAdvisor` –µ—Å–ª–∏ RAM –∫—Ä–∏—Ç–∏—á–µ–Ω
- –ò–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –µ–≥–æ —á–µ—Ä–µ–∑ `mem_limit`

---

### **–ù–ò–ó–ö–ò–ô –†–ò–°–ö: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ System API**

**–†–∏—Å–∫:** ‚ö†Ô∏è **LOW (2/10)**

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω `prom-client` (4 –ø–∞–∫–µ—Ç–∞)
- –î–æ–±–∞–≤–ª–µ–Ω endpoint `/metrics`
- Middleware —Ç–µ–ø–µ—Ä—å —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ù–µ–±–æ–ª—å—à–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ latency (–∏–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø—Ä–æ—Å–æ–≤)
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø—Ä–∏ npm install
- Endpoint `/metrics` –¥–æ—Å—Ç—É–ø–µ–Ω –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å Rate Limiting –Ω–∞ `/metrics` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## ‚úÖ **–ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û**

1. ‚úÖ **Prometheus –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω** (`127.0.0.1:9090`) - –ë–µ–∑–æ–ø–∞—Å–Ω–æ
2. ‚úÖ **–û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ –ø–æ—Å—Ç—Ä–∞–¥–∞–ª–∏** - Dashboard, API, –ë–î —Ä–∞–±–æ—Ç–∞—é—Ç
3. ‚úÖ **–ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è** - –í—Å–µ 6 targets –∞–∫—Ç–∏–≤–Ω—ã
4. ‚úÖ **–ê–≤—Ç–æ–±—ç–∫–∞–ø—ã –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã** - Cron —Ä–∞–±–æ—Ç–∞–µ—Ç
5. ‚úÖ **–õ–æ–≥–∏ –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã** - Winston –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ø–∏—Å–∞—Ç—å

---

## üìä **–ú–ï–¢–†–ò–ö–ò –î–û/–ü–û–°–õ–ï**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ Phase 3 | –ü–æ—Å–ª–µ Phase 3 | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|----------|------------|---------------|-----------|
| **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã** | 24 | 30 | +6 (+25%) |
| **RAM usage** | ~12 GB | ~13.6 GB | +1.6 GB (+13%) |
| **CPU usage** | ~5% | ~18% | +13% |
| **Disk (volumes)** | 180 MB | 225 MB | +45 MB |
| **–û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã** | 2 (7777, 80) | 3 (+3001) | +1 |

---

## üîß **–†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø**

### **1. –°–†–û–ß–ù–û: –ó–∞–∫—Ä—ã—Ç—å Grafana –æ—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞**

```bash
# 1. –ò–∑–º–µ–Ω–∏—Ç—å docker-compose.yml
sed -i 's/0.0.0.0:3001:3000/127.0.0.1:3001:3000/' docker-compose.yml

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Grafana
docker compose up -d grafana

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
ss -tulpn | grep 3001
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 127.0.0.1:3001, –ù–ï 0.0.0.0:3001
```

### **2. –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û: –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å cAdvisor –ø–æ –ø–∞–º—è—Ç–∏**

```yaml
# docker-compose.yml
cadvisor:
  # ... existing config
  deploy:
    resources:
      limits:
        memory: 512M  # –í–º–µ—Å—Ç–æ 1.3 GB
```

### **3. –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û: –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –Ω–∞ /metrics**

```javascript
// system-api/index.js
app.get('/metrics', (req, res, next) => {
    // Simple token auth
    const token = req.headers['x-metrics-token'];
    if (token !== process.env.METRICS_TOKEN) {
        return res.status(401).json({error: 'Unauthorized'});
    }
    next();
}, async (req, res) => {
    res.set('Content-Type', register.contentType);
    res.end(await register.metrics());
});
```

---

## üéØ **–ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô**

### **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–∫—Ä–∏—Ç–∏—á–Ω–æ):**
1. [ ] –ó–∞–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç Grafana (3001) –æ—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
2. [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ SSH —Ç—É–Ω–Ω–µ–ª—å
3. [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –¥–æ—Å—Ç—É–ø–∞

### **–í —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è (–≤–∞–∂–Ω–æ):**
1. [ ] –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø–∞–º—è—Ç—å cAdvisor –¥–æ 512 MB
2. [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM
3. [ ] –°–æ–∑–¥–∞—Ç—å –∞–ª–µ—Ä—Ç –Ω–∞ –≤—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

### **–ù–∞ –Ω–µ–¥–µ–ª–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
1. [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –Ω–∞ /metrics
2. [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx reverse proxy –¥–ª—è Grafana
3. [ ] –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å lightweight –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã cAdvisor

---

## üìã **–ß–ï–ö–õ–ò–°–¢ –û–¢–ö–ê–¢–ê (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)**

```bash
# –ü–æ–ª–Ω—ã–π –æ—Ç–∫–∞—Ç Phase 3
cd /home/inno/.gemini/antigravity/scratch/dashboard

# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
docker compose stop prometheus grafana node-exporter redis-exporter postgres-exporter cadvisor

# 2. –û—Ç–∫–∞—Ç–∏—Ç—å System API (–±–µ–∑ –º–µ—Ç—Ä–∏–∫)
git checkout 2122b45  # –ö–æ–º–º–∏—Ç –î–û Phase 3
docker compose build system-api
docker compose up -d system-api

# 3. –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
docker compose rm -f prometheus grafana node-exporter redis-exporter postgres-exporter cadvisor

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
./preprod_check.sh
```

---

## ‚úÖ **–í–ï–†–î–ò–ö–¢**

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ß–ê–°–¢–ò–ß–ù–û –ë–ï–ó–û–ü–ê–°–ù–û**

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ —Ö–æ—Ä–æ—à–æ:**
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- Prometheus –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω
- –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ –ø–æ—Å—Ç—Ä–∞–¥–∞–ª–∏

**–ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:**
- **–ö–†–ò–¢–ò–ß–ù–û:** –ó–∞–∫—Ä—ã—Ç—å Grafana –æ—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- **–í–ê–ñ–ù–û:** –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø–∞–º—è—Ç—å cAdvisor

**–ú–æ–∂–µ—Ç –ª–∏ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ?**
- ‚ùå **–ù–ï–¢** - –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ä—Ç–∞ Grafana
- ‚úÖ **–î–ê** - –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

**–î–∞—Ç–∞ –æ—Ç—á–µ—Ç–∞:** 2026-01-11 12:20  
**–°–ª–µ–¥—É—é—â–∏–π –∞—É–¥–∏—Ç:** –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
